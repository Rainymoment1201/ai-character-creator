# 🚀 快速开始指南

## 第一步：安装依赖

打开终端，进入项目目录：

```bash
cd "/Users/mac017/cursor10 月/character_creation_agent"
pip install -r requirements.txt
```

## 第二步：配置 API Key

1. 复制 `config_example.env` 文件，重命名为 `.env`
2. 编辑 `.env` 文件，填入你的 OpenAI API Key：

```env
OPENAI_API_KEY=sk-你的API密钥
OPENAI_BASE_URL=https://api.openai.com/v1
```

**如果你使用国内的 OpenAI 代理服务**，请修改 `OPENAI_BASE_URL`，例如：
- `https://api.chatanywhere.com.cn/v1`
- `https://openkey.cloud/v1`
- 或其他你使用的服务地址

## 第三步：运行程序

在终端中运行：

```bash
streamlit run agent.py
```

程序会自动在浏览器打开 `http://localhost:8501`

## 🎮 使用方法

1. **开始对话**：Agent 会问你想先生图还是先设定角色信息
2. **自然聊天**：像聊天一样描述你想要的角色
3. **等待按钮**：聊 3 轮后会出现生成按钮
4. **点击生成**：点击按钮生成图像或角色信息
5. **完成创建**：两个都完成后，点击"确认创建"

## 💡 对话示例

### 示例 1：先生图

```
你：我想先生成角色的图像
Agent：太好了！你想创建什么类型的角色呢？
你：可爱的猫耳少女
Agent：哇！你想要什么画风呢？二次元、写实还是其他？
你：二次元动漫风格
Agent：很棒！她的发色和眼睛颜色有想法吗？
你：粉色长发，蓝色眼睛，穿白色连衣裙

[对话几轮后会出现"帮我生图"按钮]
```

### 示例 2：先设定角色信息

```
你：我想先设定角色的性格和背景
Agent：好的！先给她起个名字吧~
你：叫小樱
Agent：小樱，好听的名字！她是什么性格呢？
你：活泼开朗，喜欢交朋友
Agent：太棒了！她的背景故事是什么呢？
你：是个高中生，喜欢画画和音乐

[对话几轮后会出现"生成角色信息"按钮]
```

## ⚠️ 常见问题

### 1. 无法连接 OpenAI API

**问题**：出现 "Connection Error" 或 "API Key Invalid"

**解决**：
- 检查 `.env` 文件中的 API Key 是否正确
- 如果在国内，尝试修改 `OPENAI_BASE_URL` 使用代理服务
- 确保网络连接正常

### 2. 图像显示占位图

**说明**：当前版本使用模拟图像（占位图），因为需要配置真实的生图 API

**如何接入真实生图**：
- 注册 Stability AI 账号获取 API Key
- 或使用其他生图服务（如 Replicate、Midjourney API 等）
- 在 `agent.py` 的 `generate_image_from_description` 函数中替换 API 调用代码

### 3. 程序运行缓慢

**原因**：GPT-4 响应较慢

**解决**：
- 在 `agent.py` 中将模型改为 `gpt-3.5-turbo`（更快更便宜）
- 修改位置：`call_llm` 函数中的 `model="gpt-4"` 改为 `model="gpt-3.5-turbo"`

### 4. 刷新页面后数据丢失

**说明**：这是正常的，当前版本使用 Session State，刷新会清空数据

**解决**：如需持久化，可以自己添加数据库支持（如 SQLite、MongoDB 等）

## 📞 需要帮助？

如果遇到问题，检查：
1. Python 版本（建议 3.8+）
2. 依赖是否正确安装（`pip list` 查看）
3. API Key 是否有效
4. 终端是否有错误信息

## 🎉 开始创建你的角色吧！

现在你可以开始使用 AI 角色创建助手了！尽情发挥创意，创建独一无二的 AI 伙伴~ 🚀

