# ğŸ¨ AI è§’è‰²åˆ›å»ºåŠ©æ‰‹

ä¸€ä¸ªæ™ºèƒ½çš„è§’è‰²åˆ›å»º Agentï¼Œé€šè¿‡è‡ªç„¶å¯¹è¯å¼•å¯¼ç”¨æˆ·åˆ›å»ºä¸ªæ€§åŒ–çš„ AI é™ªä¼´è§’è‰²ã€‚

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

- ğŸ¤– **æ™ºèƒ½å¯¹è¯å¼•å¯¼**ï¼šé€šè¿‡è‡ªç„¶å¯¹è¯æ”¶é›†è§’è‰²ä¿¡æ¯ï¼Œä¸æ˜¯å†·å†°å†°çš„è¡¨å•
- ğŸ¨ **å›¾åƒç”Ÿæˆ**ï¼šæ ¹æ®æè¿°ç”Ÿæˆè§’è‰²å¤–è§‚å›¾åƒ
- ğŸ“ **è§’è‰²ä¿¡æ¯åˆ›å»º**ï¼šç”Ÿæˆå®Œæ•´çš„è§’è‰²æ€§æ ¼ã€èƒŒæ™¯ã€è¯´è¯é£æ ¼ç­‰
- ğŸ”„ **çµæ´»é¡ºåº**ï¼šæ”¯æŒå…ˆç”Ÿå›¾å†åˆ›å»ºä¿¡æ¯ï¼Œæˆ–å…ˆåˆ›å»ºä¿¡æ¯å†ç”Ÿå›¾
- ğŸ¯ **æ™ºèƒ½çº å**ï¼šå½“ç”¨æˆ·åç¦»ä¸»é¢˜æ—¶ï¼Œæ¸©å’Œåœ°å¼•å¯¼å›åˆ›å»ºæµç¨‹
- ğŸ“Š **è¿›åº¦è¿½è¸ª**ï¼šå®æ—¶æ˜¾ç¤ºåˆ›å»ºè¿›åº¦å’Œå·²æ”¶é›†ä¿¡æ¯

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd character_creation_agent
pip install -r requirements.txt
```

### 2. é…ç½® API Key

å¤åˆ¶ `.env.example` ä¸º `.env` å¹¶å¡«å…¥ä½ çš„ API Keyï¼š

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```env
# OpenAI API é…ç½®
OPENAI_API_KEY=sk-your-api-key-here
OPENAI_BASE_URL=https://api.openai.com/v1

# ç”Ÿå›¾ APIï¼ˆå¯é€‰ï¼Œç›®å‰ä½¿ç”¨æ¨¡æ‹Ÿç”Ÿæˆï¼‰
IMAGE_API_KEY=your_image_api_key_here
IMAGE_API_URL=https://api.stability.ai/v1/generation/stable-diffusion-xl-1024-v1-0/text-to-image
```

**æ³¨æ„**ï¼š
- å¦‚æœä½ ä½¿ç”¨çš„æ˜¯å›½å†…çš„ OpenAI ä»£ç†æœåŠ¡ï¼Œè¯·ä¿®æ”¹ `OPENAI_BASE_URL`
- ç›®å‰ç”Ÿå›¾åŠŸèƒ½ä½¿ç”¨æ¨¡æ‹Ÿå›¾ç‰‡ï¼Œå¦‚éœ€çœŸå®ç”Ÿå›¾ï¼Œéœ€è¦é…ç½®ç”Ÿå›¾ APIï¼ˆå¦‚ Stability AIã€Midjourney API ç­‰ï¼‰

### 3. è¿è¡Œåº”ç”¨

```bash
streamlit run agent.py
```

æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€ `http://localhost:8501`

## ğŸ“– ä½¿ç”¨è¯´æ˜

### åŸºæœ¬æµç¨‹

1. **é€‰æ‹©èµ·ç‚¹**ï¼šé€‰æ‹©å…ˆç”Ÿæˆå›¾åƒè¿˜æ˜¯å…ˆåˆ›å»ºè§’è‰²ä¿¡æ¯
2. **å¯¹è¯å¼•å¯¼**ï¼šé€šè¿‡ 3 è½®ä»¥ä¸Šçš„è‡ªç„¶å¯¹è¯ï¼ŒAgent ä¼šæ”¶é›†æ‰€éœ€ä¿¡æ¯
3. **ç”Ÿæˆå†…å®¹**ï¼šç‚¹å‡»"å¸®æˆ‘ç”Ÿå›¾"æˆ–"ç”Ÿæˆè§’è‰²ä¿¡æ¯"æŒ‰é’®
4. **å®Œå–„å¦ä¸€åŠ**ï¼šå®Œæˆç¬¬ä¸€éƒ¨åˆ†åï¼Œç»§ç»­å®Œæˆå¦ä¸€éƒ¨åˆ†
5. **ç¡®è®¤åˆ›å»º**ï¼šä¸¤éƒ¨åˆ†éƒ½å®Œæˆåï¼Œç‚¹å‡»"ç¡®è®¤åˆ›å»º"
6. **å¼€å§‹èŠå¤©**ï¼šè§’è‰²åˆ›å»ºå®Œæˆï¼Œå¯ä»¥å¼€å§‹ä¸è§’è‰²å¯¹è¯ï¼

### ä¸¤ç§æµç¨‹

#### æµç¨‹ 1ï¼šå›¾åƒä¼˜å…ˆ ğŸ¨â†’ğŸ“

```
ç”¨æˆ·é€‰æ‹©"å…ˆç”Ÿå›¾"
    â†“
å¯¹è¯æ”¶é›†å¤–è§‚ä¿¡æ¯ï¼ˆç”»é£ã€å‘å‹ã€æœè£…ç­‰ï¼‰
    â†“
å¯¹è¯ 3 è½®åæ˜¾ç¤º"å¸®æˆ‘ç”Ÿå›¾"æŒ‰é’®
    â†“
ç‚¹å‡»æŒ‰é’®ç”Ÿæˆå›¾åƒ
    â†“
ç»§ç»­å¯¹è¯æ”¶é›†è§’è‰²ä¿¡æ¯ï¼ˆæ€§æ ¼ã€èƒŒæ™¯ç­‰ï¼‰
    â†“
å¯¹è¯ 3 è½®åæ˜¾ç¤º"ç”Ÿæˆè§’è‰²ä¿¡æ¯"æŒ‰é’®
    â†“
ç‚¹å‡»æŒ‰é’®ç”Ÿæˆè§’è‰²ä¿¡æ¯
    â†“
æ˜¾ç¤º"ç¡®è®¤åˆ›å»º"æŒ‰é’®
    â†“
æœ€ç»ˆåˆ›å»ºå®Œæˆï¼ğŸ‰
```

#### æµç¨‹ 2ï¼šè§’è‰²ä¿¡æ¯ä¼˜å…ˆ ğŸ“â†’ğŸ¨

```
ç”¨æˆ·é€‰æ‹©"å…ˆåˆ›å»ºè§’è‰²ä¿¡æ¯"
    â†“
å¯¹è¯æ”¶é›†è§’è‰²ä¿¡æ¯ï¼ˆå§“åã€æ€§æ ¼ã€èƒŒæ™¯ç­‰ï¼‰
    â†“
å¯¹è¯ 3 è½®åæ˜¾ç¤º"ç”Ÿæˆè§’è‰²ä¿¡æ¯"æŒ‰é’®
    â†“
ç‚¹å‡»æŒ‰é’®ç”Ÿæˆè§’è‰²ä¿¡æ¯
    â†“
ç»§ç»­å¯¹è¯æ”¶é›†å¤–è§‚ä¿¡æ¯
    â†“
å¯¹è¯ 3 è½®åæ˜¾ç¤º"å¸®æˆ‘ç”Ÿå›¾"æŒ‰é’®
    â†“
ç‚¹å‡»æŒ‰é’®ç”Ÿæˆå›¾åƒ
    â†“
æ˜¾ç¤º"ç¡®è®¤åˆ›å»º"æŒ‰é’®
    â†“
æœ€ç»ˆåˆ›å»ºå®Œæˆï¼ğŸ‰
```

## ğŸ¯ ç¤ºä¾‹å¯¹è¯

### ä¾‹å­ 1ï¼šç”Ÿå›¾ä¼˜å…ˆ

```
Agent: å—¨ï¼æˆ‘æ¥å¸®ä½ åˆ›å»ºä¸€ä¸ªä¸“å±çš„ AI è§’è‰²~ ğŸ¨ æˆ‘ä»¬å¯ä»¥å…ˆè®¾è®¡è§’è‰²çš„å¤–è§‚å›¾åƒï¼Œ
       ä¹Ÿå¯ä»¥å…ˆè®¾å®šè§’è‰²çš„æ€§æ ¼å’ŒèƒŒæ™¯ã€‚ä½ æƒ³ä»å“ªä¸ªå¼€å§‹å‘¢ï¼Ÿ

User: æˆ‘æƒ³å…ˆç”Ÿæˆå›¾åƒ

Agent: å¤ªå¥½äº†ï¼ä½ æƒ³åˆ›å»ºä»€ä¹ˆç±»å‹çš„è§’è‰²å‘¢ï¼Ÿæ¯”å¦‚å¯çˆ±çš„åŠ¨æ¼«å°‘å¥³ã€å¸…æ°”çš„æ¸¸æˆè§’è‰²ã€
       è¿˜æ˜¯æ¸©æŸ”çš„å¤§å§å§ï¼Ÿ

User: æˆ‘æƒ³è¦ä¸€ä¸ªå¯çˆ±çš„çŒ«å¨˜

Agent: å“‡ï¼ŒçŒ«å¨˜ï¼ğŸ˜» ä½ æƒ³è¦ä»€ä¹ˆç”»é£å‘¢ï¼ŸäºŒæ¬¡å…ƒåŠ¨æ¼«é£ã€å†™å® 3D é£ã€è¿˜æ˜¯æ‰‹ç»˜æ°´å½©é£ï¼Ÿ

User: äºŒæ¬¡å…ƒçš„

Agent: å®Œç¾ï¼é‚£å¥¹çš„å‘è‰²å’Œçœ¼ç›é¢œè‰²ä½ æœ‰æƒ³æ³•å—ï¼Ÿæ¯”å¦‚ç²‰è‰²é•¿å‘é…è“çœ¼ç›è¶…å¯çˆ±çš„~

User: å°±ç²‰è‰²é•¿å‘è“çœ¼ç›å§ï¼ç„¶åç©¿ç™½è‰²è¿è¡£è£™

Agent: å¤ªæ£’äº†ï¼âœ¨ æˆ‘å·²ç»æ”¶é›†åˆ°è¶³å¤Ÿçš„ä¿¡æ¯äº†ï¼Œç‚¹å‡»ä¸‹é¢çš„"å¸®æˆ‘ç”Ÿå›¾"æŒ‰é’®ï¼Œ
       æˆ‘ä¼šæ ¹æ®ä½ çš„æè¿°ç”Ÿæˆè§’è‰²å›¾åƒ~

[æ˜¾ç¤ºæŒ‰é’®ï¼šå¸®æˆ‘ç”Ÿå›¾ ğŸ¨]
```

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

- **å‰ç«¯æ¡†æ¶**ï¼šStreamlit
- **LLM**ï¼šOpenAI GPT-4 / GPT-3.5-turbo
- **çŠ¶æ€ç®¡ç†**ï¼šStreamlit Session State
- **å›¾åƒç”Ÿæˆ**ï¼šStable Diffusion APIï¼ˆå¯é…ç½®ï¼‰

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
character_creation_agent/
â”œâ”€â”€ agent.py              # ä¸»ç¨‹åº
â”œâ”€â”€ prompts.py            # æç¤ºè¯æ¨¡æ¿
â”œâ”€â”€ requirements.txt      # ä¾èµ–åŒ…
â”œâ”€â”€ .env.example         # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ .env                 # ç¯å¢ƒå˜é‡ï¼ˆéœ€è‡ªå·±åˆ›å»ºï¼‰
â””â”€â”€ README.md            # æœ¬æ–‡ä»¶
```

## ğŸ”§ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹ LLM æ¨¡å‹

åœ¨ `agent.py` çš„ `call_llm` å‡½æ•°ä¸­ä¿®æ”¹ï¼š

```python
response = client.chat.completions.create(
    model="gpt-4",  # æ”¹ä¸ºä½ æƒ³ç”¨çš„æ¨¡å‹
    ...
)
```

### ä¿®æ”¹å¯¹è¯è½®æ¬¡é™åˆ¶

åœ¨ `agent.py` çš„ `update_button_visibility` å‡½æ•°ä¸­ä¿®æ”¹ï¼š

```python
if (...st.session_state.turn_count >= 3...):  # æ”¹ä¸ºä½ æƒ³è¦çš„è½®æ¬¡
```

### æ¥å…¥çœŸå®ç”Ÿå›¾ API

åœ¨ `agent.py` çš„ `generate_image_from_description` å‡½æ•°ä¸­æ›¿æ¢æ¨¡æ‹Ÿä»£ç ï¼š

```python
# æ›¿æ¢è¿™éƒ¨åˆ†
# image_url = "https://via.placeholder.com/512x512.png?text=Generated+Character"

# ä¸ºçœŸå®çš„ API è°ƒç”¨ï¼Œä¾‹å¦‚ï¼š
import requests

api_key = os.getenv("IMAGE_API_KEY")
api_url = os.getenv("IMAGE_API_URL")

response = requests.post(
    api_url,
    headers={
        "Authorization": f"Bearer {api_key}",
        "Content-Type": "application/json"
    },
    json={
        "prompt": positive_prompt,
        "negative_prompt": negative_prompt,
        "width": 512,
        "height": 512,
        # ... å…¶ä»–å‚æ•°
    }
)

image_url = response.json()["artifacts"][0]["base64"]  # æ ¹æ®å®é™… API è°ƒæ•´
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **API è´¹ç”¨**ï¼šä½¿ç”¨ GPT-4 ä¼šäº§ç”Ÿè¾ƒé«˜è´¹ç”¨ï¼Œå»ºè®®æµ‹è¯•æ—¶ä½¿ç”¨ GPT-3.5-turbo
2. **ç”Ÿå›¾åŠŸèƒ½**ï¼šç›®å‰ä½¿ç”¨å ä½å›¾ï¼Œéœ€è¦è‡ªå·±æ¥å…¥ç”Ÿå›¾ API
3. **ç½‘ç»œé—®é¢˜**ï¼šå¦‚æœåœ¨å›½å†…ä½¿ç”¨ï¼Œå¯èƒ½éœ€è¦é…ç½®ä»£ç†æˆ–ä½¿ç”¨å›½å†…çš„ API æœåŠ¡
4. **æ•°æ®æŒä¹…åŒ–**ï¼šå½“å‰æ•°æ®åªä¿å­˜åœ¨ session ä¸­ï¼Œåˆ·æ–°é¡µé¢ä¼šä¸¢å¤±ï¼Œå¦‚éœ€æŒä¹…åŒ–å¯æ·»åŠ æ•°æ®åº“

## ğŸš€ åç»­ä¼˜åŒ–æ–¹å‘

- [ ] æ¥å…¥çœŸå®çš„å›¾åƒç”Ÿæˆ APIï¼ˆStable Diffusion / Midjourneyï¼‰
- [ ] æ·»åŠ æ•°æ®åº“æŒä¹…åŒ–å­˜å‚¨
- [ ] æ”¯æŒå¯¼å‡ºè§’è‰²å¡ç‰‡ï¼ˆPNG/JSONï¼‰
- [ ] æ·»åŠ å¤šè¯­è¨€æ”¯æŒ
- [ ] ä¼˜åŒ–æç¤ºè¯æ¨¡æ¿
- [ ] æ·»åŠ æ›´å¤šè§’è‰²æ¨¡æ¿
- [ ] æ”¯æŒæ‰¹é‡åˆ›å»ºè§’è‰²
- [ ] æ·»åŠ è§’è‰²é¢„è§ˆå’Œè¯•èŠåŠŸèƒ½

## ğŸ“ è®¸å¯è¯

MIT License

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

**Enjoy creating your AI companions! ğŸ‰**

